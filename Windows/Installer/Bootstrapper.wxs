<Wix xmlns="http://wixtoolset.org/schemas/v4/wxs"
    xmlns:bal="http://wixtoolset.org/schemas/v4/wxs/bal"
    xmlns:netfx="http://wixtoolset.org/schemas/v4/wxs/netfx">
    <Bundle Name="SSoTme CLI Installer" Version="224.12.7" Manufacturer="EffortlessAPI" UpgradeCode="EB59dEFF-B979-464F-B36A-57F272E872A1">
        <BootstrapperApplication>
            <bal:WixStandardBootstrapperApplication Theme="rtfLicense" LicenseFile="Assets\LICENSE.rtf" LogoFile="Assets\Icon.ico" />
        </BootstrapperApplication>


        <netfx:DotNetCoreSearch Id="DotNetCore7" Variable="DotNetCore7" RuntimeType="core" Platform="x64" MajorVersion="7" />

        <WixVariable Id="DotNetCore7DetectCondition" Value="DotNetCore7" Overridable="yes" />
        <WixVariable Id="DotNetCore7InstallCondition" Value="" Overridable="yes" />


        <Chain>
            <!-- Install .NET Runtime 7.0.20 if .NET Core 7.x is not installed -->
            <ExePackage Id="DotNetRuntime" DisplayName=".NET Runtime 7.0.20" Cache="remove" Protocol="burn" Permanent="yes" PerMachine="yes" Vital="yes" InstallArguments="/install /quiet /norestart /install-dir &quot;C:\Program Files\dotnet&quot;" UninstallArguments="/uninstall /quiet /norestart" DetectCondition="!(wix.DotNetCore7DetectCondition)" InstallCondition="!(wix.DotNetCore7InstallCondition)">
                <ExePackagePayload Name="dotnet-runtime-7.0.20-win-x64.exe" Size="28392424" DownloadUrl="https://download.visualstudio.microsoft.com/download/pr/be7eaed0-4e32-472b-b53e-b08ac3433a22/fc99a5977c57cbfb93b4afb401953818/dotnet-runtime-7.0.20-win-x64.exe" Hash="89a537a0ff92520cc543b4ee0a702063266aeb5d4d302e276fa9c8898ebf39bdc7bec134aa206bab8ef0ead395c79ab2e173abb8b506431f3cef641d8b7ecf11" />
            </ExePackage>

            <MsiPackage Id="MainInstaller" SourceFile="bin\cli-installer\Release\CLI_Installer.msi" ForcePerMachine="yes" Vital="yes" bal:DisplayInternalUICondition="WixBundleAction &lt;&gt; 4" />

        </Chain>
    </Bundle>
</Wix>